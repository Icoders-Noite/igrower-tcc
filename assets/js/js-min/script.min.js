"use strict";var ssid,senha,minHumidity,autoMode,hostApi="https://us-central1-meu-tcc-1995.cloudfunctions.net/function-1";function callback(e){e.status?window.location.href="dashboard.html":$("#credenciaisIncorretas").fadeIn("slow")}function callbackCadastro(e){e.status?(alert("Cadastrado com sucesso!"),window.location.href="gerar-configuracoes.html"):"E-mail já cadastrado!"==e.mensagem?emailCadastrado():alert(e.mensagem)}function emailCadastrado(){$("#emailExistente").fadeIn("slow",function(){})}$("#btn-login").click(function(){$("#credenciaisIncorretas").fadeOut("fast",function(){$("#camposEmBranco").fadeOut("fast",function(){var e,a=document.getElementById("email").value,t=document.getElementById("senha").value;0<a.length&&0<t.length?(e={email:a,senha:btoa(t)},$.ajax({url:hostApi+"/user-login",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Content-Type":"application/json"},method:"POST",type:"POST",dataType:"json",data:JSON.stringify(e),success:function(e){console.log("succes: "+e.status),callback(e)}})):$("#camposEmBranco").fadeIn("slow")})})}),$("#senha").on("keypress",function(e){13==e.which&&$("#btn-login").trigger("click")}),$("#abrirCadastro").click(function(){$("#login").fadeOut("slow",function(){$("#cadastro").fadeIn("slow")}),document.title="Cadastro"}),$("#voltarLogin").click(function(){$("#cadastro").fadeOut("slow",function(){$("#login").fadeIn("slow")}),document.title="Login"}),$("#btn-cadastro").click(function(){$("#dadosNaoPreenchidos").fadeOut("fast",function(){$("#emailExistente").fadeOut("fast",function(){$("#emailExistente").fadeOut("fast",function(){$("#senhaCurta").fadeOut("fast",function(){$("#senhasDivergentes").fadeOut("fast",function(){var e,a=document.getElementById("emailCadastro").value,t=document.getElementById("nome").value,n=document.getElementById("sobrenome").value,o=document.getElementById("senhaCadastro").value,i=document.getElementById("confirmarSenha").value;0<a.length&&0<t.length&&0<n.length&&0<o.length&&0<i.length?8<=o.length?o==i?(e={nome:t,sobrenome:n,email:a,senha:btoa(o)},$.ajax({url:hostApi+"/novo-usuario",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Content-Type":"application/json"},method:"POST",type:"POST",dataType:"json",data:JSON.stringify(e),success:function(e){console.log("succes: "+e.status),callbackCadastro(e)}})):$("#senhasDivergentes").fadeIn("slow",function(){}):$("#senhaCurta").fadeIn("slow",function(){}):$("#dadosNaoPreenchidos").fadeIn("slow",function(){})})})})})})});var idArduino=-1;function ArquivoGerar(e){0<senha.length&&0<ssid.length&&"-1"!=minHumidity&&"0"!=minHumidity&&"-1"!=autoMode?(alert("Salve o arquivo de configurações dentro do cartão SD do Igrower e selecione para substituir arquivo"),salvar("".concat(e,"\n").concat(ssid,"\n").concat(senha,"\n"))):alert("Opções inválidas")}function salvar(e){var a=new Blob(Array.from(e),{type:"text/plain;charset=utf-8"});saveAs(a,"CONFIG.txt")}$("#btn-gerar-config").click(function(){ssid=$("#ssid").val(),senha=$("#senhaWifi").val(),minHumidity=$("#minHumidity").children("option:selected").val(),autoMode=$("#autoMode").children("option:selected").val(),idArduino=$("#idArduino").children("option:selected").val();var e={userId:12,minHumidity:minHumidity,autoMode:autoMode};$.ajax({url:"https://my-json-server.typicode.com/Icoders-Noite/api-fake-test/config",data:e,error:function(){alert("Ocorreu um error ao se conectar com a API")},dataType:"jsonp",success:function(){ArquivoGerar(idArduino)},type:"GET"})}),$("#minHumidity").change(function(){"-1"==$(this).children("option:selected").val()&&$("#minHumidityManual").fadeIn("slow")}).trigger("change");var adicionouItens=!1;function salvarIdEmcache(){}function loadConfig(){$("#configArduino").html('<iframe id="iframeConfig" src="gerar-configuracoes.html"></iframe>')}$("#minHumidityManual").change("mousestop",function(){adicionouItens&&$("#itemAdicionado").remove();var e=$("#minHumidityManual").val(),a="".concat(e,"%");$("#minHumidity").append(new Option(a,e)),$("#minHumidity").children(":last-child").attr("id","itemAdicionado").attr("selected","selected"),adicionouItens=!0}),$(window).on("load",function(){$("#preloader .inner").fadeOut(),$("#preloader").delay(350).fadeOut("slow"),$("body").delay(350).css({overflow:"visible"})}),$("#abrirConfig").click(function(){loadConfig()});var ctx=document.getElementById("graficos-dashboard").getContext("2d"),myChart=new Chart(ctx,{type:"bar",data:{labels:["Umidade Solo","Umidade Solo"],datasets:[{data:[12,19,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1},tooltips:{enabled:!1}}});